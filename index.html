<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Glazo ‚Äî Montage vid√©o</title>
    <meta name="description" content="Abordable ‚Ä¢ √Ä l'√©coute des retours ‚Ä¢ Shorts/TikTok, Vid√©os longues, Jingle">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              display: ['Sora', 'ui-sans-serif', 'system-ui'],
              sans: ['Poppins', 'ui-sans-serif', 'system-ui']
            },
            colors: {
              brand: {
                start: '#7C3AED', // violet
                end: '#EC4899'    // rose
              }
            },
            boxShadow: {
              glow: '0 0 0 2px rgba(124,58,237,0.25), 0 10px 30px rgba(236,72,153,0.25)'
            }
          }
        }
      }
    </script>
    <style>
      :root{
        --bg: radial-gradient(1200px 600px at 10% 10%, rgba(124,58,237,.25), transparent 60%),
              radial-gradient(1000px 500px at 90% 20%, rgba(236,72,153,.25), transparent 60%),
              linear-gradient(135deg, #0b0b12 0%, #0e0b17 100%);
        --text:#ffffff; --text-80:rgba(255,255,255,0.8); --text-70:rgba(255,255,255,0.7); --text-60:rgba(255,255,255,0.6); --text-50:rgba(255,255,255,0.5);
        --card: rgba(255,255,255,0.06);
        --border: rgba(255,255,255,0.08);
      }
      .theme-light{
        /* Th√®me clair Teal/Cyan sans blanc - fond aurora plus color√© */
        --bg:
          conic-gradient(from 220deg at 18% 12%, rgba(6,182,212,.24), transparent 38%), /* cyan halo */
          conic-gradient(from 120deg at 86% 22%, rgba(45,212,191,.22), transparent 42%), /* teal halo */
          radial-gradient(1000px 520px at 18% 78%, rgba(56,189,248,.20), transparent 60%), /* sky pool */
          radial-gradient(900px 480px at 82% 86%, rgba(34,211,238,.18), transparent 62%), /* cyan pool */
          linear-gradient(135deg, #c6f7fb 0%, #b7f4ee 52%, #b8f7ff 100%);
        --text:#0a0f10; --text-80:rgba(10,15,16,0.92); --text-70:rgba(10,15,16,0.86); --text-60:rgba(10,15,16,0.78); --text-50:rgba(10,15,16,0.68);
        /* Cartes teint√©es cyan */
        --card: rgba(6,182,212,0.16);
        --border: rgba(6,182,212,0.30);
      }
      .gradient-bg { background: var(--bg); }
      .animated-gradient {
        background: linear-gradient(120deg, var(--g1), var(--g2), var(--g1));
        background-size: 200% 200%;
        animation: shift 12s ease-in-out infinite;
      }
      @keyframes shift { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
      .glass { background: var(--card); -webkit-backdrop-filter: blur(12px); backdrop-filter: blur(12px); border: 1px solid var(--border); }
      /* Overrides de couleurs Tailwind text-white* en th√®me clair */
      .theme-light .text-white{ color: var(--text) !important; }
      .theme-light .text-white\/80{ color: var(--text-80) !important; }
      .theme-light .text-white\/70{ color: var(--text-70) !important; }
      .theme-light .text-white\/60{ color: var(--text-60) !important; }
      .theme-light .text-white\/50{ color: var(--text-50) !important; }
      /* Hover plus visible en clair */
      .theme-light .hover\:text-white:hover{ color:#06B6D4 !important; }
      /* Forcer une couleur par d√©faut lisible pour tout le texte en clair */
      .theme-light{ color: var(--text); }
      .theme-light *{ color: inherit; }
      /* Boutons translucides: cyan en clair */
      .theme-light .bg-white\/10{ background-color: rgba(6,182,212,0.18) !important; }
      .theme-light .hover\:bg-white\/20:hover{ background-color: rgba(6,182,212,0.28) !important; }
      /* Placeholders formulaire plus visibles en clair */
      .theme-light input::placeholder, .theme-light textarea::placeholder{ color: var(--text-50); }
      /* Contact: forcer tout le texte en noir en mode clair */
      .theme-light #contact h2,
      .theme-light #contact .select-text,
      .theme-light #contact a,
      .theme-light #contact span,
      .theme-light #contact label,
      .theme-light #contact button,
      .theme-light #contact input,
      .theme-light #contact textarea {
        color: #0a0a12 !important;
      }
      /* Titres/CTA demand√©s en noir en mode clair */
      .theme-light [data-i18n="portfolio_title"], /* Portfolio */
      .theme-light [data-i18n="services_title"],  /* Services */
      .theme-light [data-i18n="service1_title"],  /* Shorts / TikTok */
      .theme-light [data-i18n="portfolio_shorts"],/* Shorts */
      .theme-light [data-i18n="portfolio_longs"], /* Vid√©os longues */
      .theme-light [data-i18n="service3_title"],  /* Jingle */
      .theme-light [data-i18n="hero_cta_portfolio"] /* Voir portfolio */
      { color:#0a0a12 !important; }
      /* Boutons pleins -> primaires cyan en clair */
      .theme-light .bg-white{ background-color:#06B6D4 !important; color:#0a0f10 !important; }
      .theme-light .hover\:bg-white\/90:hover{ background-color:#0891B2 !important; color:#0a0f10 !important; }

      /* === Mode sombre: harmoniser boutons avec la palette brand (violet/rose) === */
      body:not(.theme-light) .bg-white\/10{ background-color: rgba(124,58,237,0.22) !important; color:#ffffff !important; }
      body:not(.theme-light) .hover\:bg-white\/20:hover{ background-color: rgba(236,72,153,0.30) !important; color:#ffffff !important; }
      body:not(.theme-light) .bg-white{ background-color:#7C3AED !important; color:#ffffff !important; }
      body:not(.theme-light) .hover\:bg-white\/90:hover{ background-color:#6D28D9 !important; color:#ffffff !important; }
    </style>
  </head>
  <body class="gradient-bg text-white min-h-screen">
    <!-- Nav -->
    <header class="sticky top-0 z-50">
      <div class="max-w-6xl mx-auto px-4">
        <nav class="glass mt-4 rounded-2xl px-4 py-3 flex items-center justify-between">
          <div class="flex items-center gap-3">
            <div class="w-9 h-9 rounded-xl animated-gradient" style="--g1:#7C3AED; --g2:#EC4899;"></div>
            <span class="font-display text-lg tracking-wide">Glazo</span>
          </div>
          <div class="hidden md:flex items-center gap-6 text-sm text-white/80">
            <a href="index.html" class="hover:text-white">Home</a>
            <a href="#services" class="hover:text-white">Services</a>
            <a href="#portfolio" class="hover:text-white">Portfolio</a>
            <a href="videos.html" class="hover:text-white">Vid√©os</a>
            <a href="login.html" class="hover:text-white">Compte</a>
            <a href="reviews.html" class="hover:text-white">Avis</a>
            <a href="#contact" class="hover:text-white">Contact</a>
            <select id="lang" class="ml-2 bg-white text-black rounded-xl px-3 py-2 outline-none">
              <option value="fr">FR</option>
              <option value="en">EN</option>
              <option value="es">ES</option>
              <option value="de">DE</option>
              <option value="it">IT</option>
              <option value="zh-Hant">ÁπÅÈ´î</option>
            </select>
            <div class="relative flex items-center gap-2">
              <a id="account-btn" href="login.html" class="inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/10 hover:bg-white/20 transition shadow-glow">Compte / Se connecter</a>
              <div id="account-menu" class="hidden absolute right-0 mt-2 w-52 glass rounded-xl p-3 text-sm">
                <div id="account-email" class="text-white/70 truncate mb-2">‚Äî</div>
                <button id="logout" class="w-full text-left px-3 py-2 rounded-lg bg-white/10 hover:bg-white/20">Se d√©connecter</button>
              </div>
              <button id="theme-toggle" aria-label="Theme" class="inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white/10 hover:bg-white/20 transition">üåô</button>
            </div>
          </div>
          <!-- Mobile controls -->
          <div class="md:hidden flex items-center gap-2">
            <button id="theme-toggle-m" aria-label="Theme" class="inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white/10 hover:bg-white/20 transition">üåô</button>
            <button id="menu-toggle" aria-label="Menu" class="inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white/10 hover:bg-white/20">‚ò∞</button>
          </div>
        </nav>
        <!-- Mobile menu panel -->
        <div id="mobile-menu" class="md:hidden hidden glass mt-2 rounded-2xl p-4">
          <div class="flex flex-col gap-3 text-sm">
            <a href="index.html" class="hover:text-white">Home</a>
            <a href="#services" class="hover:text-white">Services</a>
            <a href="#portfolio" class="hover:text-white">Portfolio</a>
            <a href="videos.html" class="hover:text-white">Vid√©os</a>
            <a href="reviews.html" class="hover:text-white">Avis</a>
            <a href="#contact" class="hover:text-white">Contact</a>
            <hr class="border-white/10">
            <a id="account-btn-m" href="login.html" class="inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/10 hover:bg-white/20 transition">Compte / Se connecter</a>
            <div class="flex items-center gap-2">
              <label class="text-white/70 text-xs">Lang</label>
              <select id="lang-m" class="bg-white text-black rounded-xl px-3 py-2 outline-none">
                <option value="fr">FR</option>
                <option value="en">EN</option>
                <option value="es">ES</option>
                <option value="de">DE</option>
                <option value="it">IT</option>
                <option value="zh-Hant">ÁπÅÈ´î</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Hero -->
    <section class="relative">
      <div class="max-w-6xl mx-auto px-4 py-20 md:py-28">
        <div class="grid md:grid-cols-2 items-center gap-10">
          <div>
            <div class="inline-flex items-center gap-2 glass rounded-full px-3 py-1.5 text-xs text-white/80 mb-5">
              <span class="w-2 h-2 rounded-full animated-gradient" style="--g1:#7C3AED; --g2:#EC4899;"></span>
              <span data-i18n="hero_badge_1">Abordable</span>
              <span class="opacity-40">‚Ä¢</span>
              <span data-i18n="hero_badge_2">√Ä l'√©coute des retours</span>
            </div>
            <h1 class="font-display text-4xl md:text-6xl font-semibold leading-tight" data-i18n-html="hero_h1_html">
              Montage vid√©o <span class="text-transparent bg-clip-text animated-gradient" style="--g1:#7C3AED; --g2:#EC4899;">cr√©atif</span> pour cr√©ateurs
            </h1>
            <p class="mt-5 text-white/70 max-w-xl">
              ............................TEXTE...............................................
            </p>
            <div class="mt-8 flex flex-wrap items-center gap-3">
              <a href="#portfolio" class="inline-flex items-center gap-2 px-5 py-3 rounded-xl bg-white/10 hover:bg-white/20 transition shadow-glow" data-i18n="hero_cta_portfolio">
                Voir portfolio
              </a>
              <a href="#contact" class="inline-flex items-center gap-2 px-5 py-3 rounded-xl bg-white text-black hover:bg-white/90 transition" data-i18n="hero_cta_contact">
                Me contacter
              </a>
            </div>
          </div>
          <div>
            <div class="aspect-[4/3] rounded-3xl glass overflow-hidden relative">
              <div class="absolute inset-0 animated-gradient opacity-60" style="--g1:#7C3AED; --g2:#EC4899;"></div>
              <div class="absolute inset-0 flex items-center justify-center">
                <div class="glass rounded-2xl px-4 py-2 text-sm" data-i18n="hero_preview_label"> Aper√ßu portfolio </div>
              </div>
              <img alt="Preview" src="https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?q=80&w=1600&auto=format&fit=crop" class="w-full h-full object-cover mix-blend-overlay"/>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Services -->
    <section id="services" class="relative">
      <div class="max-w-6xl mx-auto px-4 py-14 md:py-20">
        <h2 class="font-display text-2xl md:text-3xl mb-6" data-i18n="services_title">Services</h2>
        <div class="grid md:grid-cols-3 gap-6">
          <!-- Card 1 -->
          <div class="glass rounded-2xl p-6 hover:shadow-glow transition">
            <div class="w-10 h-10 rounded-lg animated-gradient mb-4" style="--g1:#7C3AED; --g2:#EC4899;"></div>
            <h3 class="font-semibold" data-i18n="service1_title">Shorts / TikTok</h3>
            <p class="text-sm text-white/70 mt-2" data-i18n="service1_desc">Cuts dynamiques, sous-titres styl√©s.</p>
          </div>
          <!-- Card 2 -->
          <div class="glass rounded-2xl p-6 hover:shadow-glow transition">
            <div class="w-10 h-10 rounded-lg animated-gradient mb-4" style="--g1:#EC4899; --g2:#7C3AED;"></div>
            <h3 class="font-semibold" data-i18n="service2_title">Vid√©os longues</h3>
            <p class="text-sm text-white/70 mt-2" data-i18n="service2_desc">Narration, rythme, habillage graphique, export multi-plateformes.</p>
          </div>
          <!-- Card 3 -->
          <div class="glass rounded-2xl p-6 hover:shadow-glow transition">
            <div class="w-10 h-10 rounded-lg animated-gradient mb-4" style="--g1:#8B5CF6; --g2:#06B6D4;"></div>
            <h3 class="font-semibold" data-i18n="service3_title">Jingle</h3>
            <p class="text-sm text-white/70 mt-2" data-i18n="service3_desc">Intro/outro, logo reveal, sonorit√©s percutantes.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Portfolio -->
    <section id="portfolio" class="relative">
      <div class="max-w-6xl mx-auto px-4 py-14 md:py-20">
        <div class="flex items-center justify-between mb-6">
          <h2 class="font-display text-2xl md:text-3xl" data-i18n="portfolio_title">Portfolio</h2>
          <a href="#contact" class="text-sm text-white/70 hover:text-white" data-i18n="portfolio_more">Demander plus d'exemples ‚Üí</a>
        </div>
        <!-- Shorts -->
        <div class="text-sm text-white/60 mb-3" data-i18n="portfolio_shorts">Shorts</div>
        <div class="grid sm:grid-cols-2 md:grid-cols-4 gap-6">
          <div class="glass rounded-2xl overflow-hidden">
            <div class="aspect-[9/16] md:aspect-[16/9] w-full">
              <iframe class="w-full h-full" loading="lazy" src="https://www.youtube-nocookie.com/embed/jLbvMOBwySY" title="YouTube Shorts" frameborder="0" referrerpolicy="strict-origin-when-cross-origin" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            </div>
            <a href="https://www.youtube.com/shorts/jLbvMOBwySY" target="_blank" rel="noopener" class="block text-xs text-white/60 hover:text-white px-3 py-2" data-i18n="open_youtube">Ouvrir sur YouTube ‚Üó</a>
          </div>
          <div class="glass rounded-2xl overflow-hidden">
            <div class="aspect-[9/16] md:aspect-[16/9] w-full">
              <iframe class="w-full h-full" loading="lazy" src="https://www.youtube-nocookie.com/embed/VbWBuFPtlqY" title="YouTube Shorts" frameborder="0" referrerpolicy="strict-origin-when-cross-origin" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            </div>
            <a href="https://www.youtube.com/shorts/VbWBuFPtlqY" target="_blank" rel="noopener" class="block text-xs text-white/60 hover:text-white px-3 py-2" data-i18n="open_youtube">Ouvrir sur YouTube ‚Üó</a>
          </div>
          <div class="glass rounded-2xl overflow-hidden">
            <div class="aspect-[9/16] md:aspect-[16/9] w-full">
              <iframe class="w-full h-full" loading="lazy" src="https://www.youtube-nocookie.com/embed/bzO7cSer04s" title="YouTube Shorts" frameborder="0" referrerpolicy="strict-origin-when-cross-origin" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            </div>
            <a href="https://www.youtube.com/shorts/bzO7cSer04s" target="_blank" rel="noopener" class="block text-xs text-white/60 hover:text-white px-3 py-2" data-i18n="open_youtube">Ouvrir sur YouTube ‚Üó</a>
          </div>
          <div class="glass rounded-2xl overflow-hidden">
            <div class="aspect-[9/16] md:aspect-[16/9] w-full">
              <iframe class="w-full h-full" loading="lazy" src="https://www.youtube-nocookie.com/embed/-XHLH_bICNI" title="YouTube Shorts" frameborder="0" referrerpolicy="strict-origin-when-cross-origin" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            </div>
            <a href="https://www.youtube.com/shorts/-XHLH_bICNI" target="_blank" rel="noopener" class="block text-xs text-white/60 hover:text-white px-3 py-2" data-i18n="open_youtube">Ouvrir sur YouTube ‚Üó</a>
          </div>
        </div>

        <!-- Vid√©os longues -->
        <div class="text-sm text-white/60 mt-10 mb-3" data-i18n="portfolio_longs">Vid√©os longues</div>
        <div class="grid sm:grid-cols-1 md:grid-cols-2 gap-6">
          <div class="glass rounded-2xl overflow-hidden">
            <div class="aspect-[16/9] w-full">
              <iframe class="w-full h-full" loading="lazy" src="https://www.youtube-nocookie.com/embed/N_0jMszGsGA" title="YouTube video" frameborder="0" referrerpolicy="strict-origin-when-cross-origin" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            </div>
            <a href="https://www.youtube.com/watch?v=N_0jMszGsGA" target="_blank" rel="noopener" class="block text-xs text-white/60 hover:text-white px-3 py-2" data-i18n="open_youtube">Ouvrir sur YouTube ‚Üó</a>
          </div>
          <div class="glass rounded-2xl overflow-hidden">
            <div class="aspect-[16/9] w-full">
              <iframe class="w-full h-full" loading="lazy" src="https://www.youtube-nocookie.com/embed/o6mwDyeyQRU" title="YouTube video" frameborder="0" referrerpolicy="strict-origin-when-cross-origin" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            </div>
            <a href="https://www.youtube.com/watch?v=o6mwDyeyQRU" target="_blank" rel="noopener" class="block text-xs text-white/60 hover:text-white px-3 py-2" data-i18n="open_youtube">Ouvrir sur YouTube ‚Üó</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Avis -->
    <section id="avis" class="relative">
      <div class="max-w-6xl mx-auto px-4 py-14 md:py-20">
        <div class="flex items-center justify-between mb-6">
          <h2 class="font-display text-2xl md:text-3xl">Avis</h2>
          <a href="reviews.html" class="text-sm text-white/70 hover:text-white">Voir tous les avis ‚Üí</a>
        </div>
        <div id="reviews-auth-guard" class="glass rounded-xl p-4 mb-4 hidden">
          <p>Vous devez √™tre connect√© pour laisser un avis. <a href="login.html" class="underline">Se connecter</a></p>
        </div>
        <form id="review-form" class="glass rounded-2xl p-4 mb-6 hidden">
          <textarea id="review-text" rows="3" class="w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2 outline-none focus:border-white/20" placeholder="√âcrivez votre avis..."></textarea>
          <div class="mt-1 flex items-center justify-between text-xs">
            <span id="review-count">0/300</span>
            <span id="review-error" class="text-red-400"></span>
          </div>
          <div class="mt-3 flex justify-end">
            <button type="submit" class="inline-flex items-center gap-2 px-5 py-2 rounded-xl bg-white/10 hover:bg-white/20">Publier</button>
          </div>
        </form>
        <div id="reviews-list" class="grid gap-3"></div>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="relative">
      <div class="max-w-6xl mx-auto px-4 py-14 md:py-20">
        <div class="grid md:grid-cols-2 gap-8 items-start">
          <div>
            <h2 class="font-display text-2xl md:text-3xl" data-i18n="contact_title">Contact :</h2>
            <div class="mt-6 flex flex-col gap-3 text-sm">
              <div class="glass px-4 py-2 rounded-xl hover:shadow-glow transition flex items-center justify-between">
                <span class="select-text"><span data-i18n="contact_email_label">email :</span> glazo.montage@gmail.com</span>
                <button id="copy-email" class="text-xs px-2 py-1 rounded-lg bg-white/10 hover:bg-white/20">üìã Copier</button>
              </div>
              <a href="https://www.instagram.com/glazo.montage/" target="_blank" rel="noopener" class="glass px-4 py-2 rounded-xl hover:shadow-glow transition"><span data-i18n="contact_instagram_label">Instagram :</span> @glazo.montage</a>
              <div class="glass px-4 py-2 rounded-xl hover:shadow-glow transition flex items-center justify-between">
                <span class="select-text"><span data-i18n="contact_discord_label">Discord :</span> glazo_</span>
                <button id="copy-discord" class="text-xs px-2 py-1 rounded-lg bg-white/10 hover:bg-white/20">üìã Copier</button>
              </div>

            </div>
          </div>
          <form class="glass rounded-2xl p-6 grid gap-4">
            <div>
              <label class="text-sm text-white/70" data-i18n="form_name_label">Nom</label>
              <input class="mt-1 w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2 outline-none focus:border-white/20" data-i18n-placeholder="form_name_ph" placeholder="Ton nom"/>
            </div>
            <div>
              <label class="text-sm text-white/70" data-i18n="form_email_label">Email</label>
              <input type="email" class="mt-1 w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2 outline-none focus:border-white/20" data-i18n-placeholder="form_email_ph" placeholder="ton@email.com"/>
            </div>
            <div>
              <label class="text-sm text-white/70" data-i18n="form_message_label">Message</label>
              <textarea rows="4" class="mt-1 w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2 outline-none focus:border-white/20" data-i18n-placeholder="form_message_ph" placeholder="Parle-moi de ton projet..."></textarea>
            </div>
            <button type="button" class="inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-white text-black hover:bg-white/90 transition" data-i18n="form_send">Envoyer</button>
          </form>
        </div>
      </div>
    </section>

    <footer class="py-10 text-center text-xs text-white/50">¬© <span id="y"></span> Glazo. Tous droits r√©serv√©s.</footer>
    <script>
      document.getElementById('y').textContent = new Date().getFullYear();
      (function(){
        const btn = document.getElementById('copy-email');
        if(!btn) return;
        const email = 'glazo.montage@gmail.com';
        btn.addEventListener('click', async function(){
          try {
            await navigator.clipboard.writeText(email);
            const prev = btn.textContent;
            btn.textContent = btn.dataset.copied || '‚úî Copi√©';
            setTimeout(()=> btn.textContent = prev, 1200);
          } catch(e) {
            // fallback: s√©lection du texte
            const range = document.createRange();
            const span = btn.previousElementSibling;
            if(span){
              range.selectNodeContents(span);
              const sel = window.getSelection();
              sel.removeAllRanges();
              sel.addRange(range);
            }
          }
        });
      })();
      (function(){
        const btn = document.getElementById('copy-discord');
        if(!btn) return;
        const user = 'glazo_';
        btn.addEventListener('click', async function(){
          try {
            await navigator.clipboard.writeText(user);
            const prev = btn.textContent;
            btn.textContent = btn.dataset.copied || '‚úî Copi√©';
            setTimeout(()=> btn.textContent = prev, 1200);
          } catch(e) {
            const range = document.createRange();
            const span = btn.previousElementSibling;
            if(span){
              range.selectNodeContents(span);
              const sel = window.getSelection();
              sel.removeAllRanges();
              sel.addRange(range);
            }
          }
        });
      })();
    </script>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
      import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";
      import { getFirestore, collection, addDoc, serverTimestamp, query, orderBy, onSnapshot, limit, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";
      import { I18N } from "./assets/i18n.js";

      const firebaseConfig = {
        apiKey: "AIzaSyAbx4ixAtYFaIGsc69IChLyB0huNt1K5K4",
        authDomain: "site-glazo.firebaseapp.com",
        projectId: "site-glazo",
        storageBucket: "site-glazo.firebasestorage.app",
        messagingSenderId: "13557132291",
        appId: "1:13557132291:web:80c0f3219b06100b03b236",
        measurementId: "G-DVFXY4ZJBT"
      };
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      const accountBtn = document.getElementById('account-btn');
      const accountMenu = document.getElementById('account-menu');
      const accountEmail = document.getElementById('account-email');
      const logoutBtn = document.getElementById('logout');
      const langSel = document.getElementById('lang');
      const themeBtn = document.getElementById('theme-toggle');
      const themeBtnM = document.getElementById('theme-toggle-m');
      const menuToggle = document.getElementById('menu-toggle');
      const mobileMenu = document.getElementById('mobile-menu');
      const accountBtnM = document.getElementById('account-btn-m');
      const langSelM = document.getElementById('lang-m');

      // THEME: apply saved theme
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'light') {
        document.body.classList.add('theme-light');
        if (themeBtn) themeBtn.textContent = '‚òÄÔ∏è';
        if (themeBtnM) themeBtnM.textContent = '‚òÄÔ∏è';
      } else {
        if (themeBtn) themeBtn.textContent = 'üåô';
        if (themeBtnM) themeBtnM.textContent = 'üåô';
      }
      if (themeBtn) {
        themeBtn.addEventListener('click', ()=>{
          const isLight = document.body.classList.toggle('theme-light');
          localStorage.setItem('theme', isLight ? 'light' : 'dark');
          themeBtn.textContent = isLight ? '‚òÄÔ∏è' : 'üåô';
          if (themeBtnM) themeBtnM.textContent = isLight ? '‚òÄÔ∏è' : 'üåô';
        });
      }
      if (themeBtnM) {
        themeBtnM.addEventListener('click', ()=>{
          const isLight = document.body.classList.toggle('theme-light');
          localStorage.setItem('theme', isLight ? 'light' : 'dark');
          themeBtnM.textContent = isLight ? '‚òÄÔ∏è' : 'üåô';
          if (themeBtn) themeBtn.textContent = isLight ? '‚òÄÔ∏è' : 'üåô';
        });
      }
      if (menuToggle && mobileMenu) {
        menuToggle.addEventListener('click', ()=>{
          mobileMenu.classList.toggle('hidden');
        });
      }

      I18N.init(langSel, 'index');
      if (langSel && langSelM) {
        // sync selects
        langSelM.value = I18N.getCurrentLang ? I18N.getCurrentLang() : (localStorage.getItem('lang') || 'fr');
        langSelM.addEventListener('change', ()=>{ I18N.setLang(langSelM.value); langSel.value = langSelM.value; });
        langSel.addEventListener('change', ()=>{ langSelM.value = langSel.value; });
      }

      // Auth state UI
      onAuthStateChanged(auth, (user)=>{
        I18N.setAuthState(user);
        if (user) {
          accountBtn.href = '#';
          accountBtn.textContent = 'Mon compte';
          if (accountEmail) accountEmail.textContent = user.email || '‚Äî';
          accountBtn.onclick = (e)=>{ e.preventDefault(); accountMenu.classList.toggle('hidden'); };
          if (accountBtnM) { accountBtnM.href = '#'; accountBtnM.textContent = 'Mon compte'; }
        } else {
          accountBtn.href = 'login.html';
          // I18N g√®re le label quand d√©connect√©
          if (accountMenu) accountMenu.classList.add('hidden');
          if (accountBtnM) { accountBtnM.href = 'login.html'; accountBtnM.textContent = 'Compte / Se connecter'; }
        }
      });

      if (logoutBtn) {
        logoutBtn.addEventListener('click', async ()=>{
          await signOut(auth);
          accountMenu.classList.add('hidden');
          window.location.href = 'index.html';
        });
      }

      // Fermer le menu au clic ext√©rieur
      document.addEventListener('click', (e)=>{
        if (!accountMenu || accountMenu.classList.contains('hidden')) return;
        const within = accountMenu.contains(e.target) || accountBtn.contains(e.target);
        if (!within) accountMenu.classList.add('hidden');
      });
      // fermer menu mobile au clic lien
      if (mobileMenu) {
        mobileMenu.addEventListener('click', (e)=>{
          const t = e.target;
          if (t.tagName === 'A') mobileMenu.classList.add('hidden');
        });
      }

      // Avis: soumission et liste en temps r√©el
      const reviewForm = document.getElementById('review-form');
      const reviewText = document.getElementById('review-text');
      const reviewsList = document.getElementById('reviews-list');
      const reviewCount = document.getElementById('review-count');
      const reviewError = document.getElementById('review-error');

      if (reviewForm && reviewText && reviewsList) {
        // compteur de caract√®res
        reviewText.addEventListener('input', ()=>{
          const len = reviewText.value.length;
          if (reviewCount) reviewCount.textContent = `${Math.min(len,300)}/300`;
          if (len > 300) {
            reviewText.value = reviewText.value.slice(0,300);
            if (reviewError) reviewError.textContent = '300 caract√®res max.';
            setTimeout(()=>{ if (reviewError) reviewError.textContent=''; }, 1500);
          }
        });

        reviewForm.addEventListener('submit', async (e)=>{
          e.preventDefault();
          const text = reviewText.value.trim();
          if (!text) { if (reviewError) reviewError.textContent = 'Avis vide.'; return; }
          if (text.length > 300) { if (reviewError) reviewError.textContent = '300 caract√®res max.'; return; }
          const user = auth.currentUser;
          if (!user) { alert('Veuillez vous connecter.'); return; }
          try {
            await addDoc(collection(db, 'reviews'), {
              uid: user.uid,
              email: user.email || null,
              text,
              createdAt: serverTimestamp(),
              createdAtMs: Date.now()
            });
            reviewText.value = '';
            if (reviewCount) reviewCount.textContent = '0/300';
          } catch (err) {
            if (reviewError) reviewError.textContent = "Erreur lors de l'envoi.";
          }
        });

        const q = query(collection(db, 'reviews'), orderBy('createdAt', 'desc'), limit(3));
        onSnapshot(q, (snap)=>{
          reviewsList.innerHTML = '';
          if (snap.empty) {
            reviewsList.innerHTML = '<div class="text-white/60">Aucun avis pour le moment.</div>';
            return;
          }
          const current = auth.currentUser;
          snap.forEach(d => {
            const r = d.data();
            const div = document.createElement('div');
            div.className = 'glass rounded-xl p-4';
            const who = r.email ? r.email : 'Utilisateur';
            const date = (r.createdAt && r.createdAt.toDate) ? r.createdAt.toDate() : (r.createdAtMs ? new Date(r.createdAtMs) : null);
            const safeText = String(r.text || '').replace(/</g, '&lt;');
            const canDel = current && current.uid === r.uid;
            div.innerHTML = `
              <div class="flex items-center justify-between text-xs text-white/60">
                <span>${who}${date ? ' ‚Äî ' + date.toLocaleDateString() : ''}</span>
                ${canDel ? `<button class="review-del bg-white/10 hover:bg-white/20 px-2 py-1 rounded" data-id="${d.id}">Supprimer</button>` : ''}
              </div>
              <div class="mt-1">${safeText}</div>`;
            reviewsList.appendChild(div);
          });
        }, (err)=>{
          reviewsList.innerHTML = '<div class="text-red-400 text-sm">Erreur de chargement des avis.</div>';
        });

        // suppression: d√©l√©gation d'√©v√©nements
        reviewsList.addEventListener('click', async (e)=>{
          const t = e.target;
          if (!(t && t.classList && t.classList.contains('review-del'))) return;
          const id = t.getAttribute('data-id');
          if (!id) return;
          try {
            await deleteDoc(doc(db, 'reviews', id));
          } catch(err) {
            alert('Suppression impossible.');
          }
        });
      }
    </script>
  </body>
</html>
